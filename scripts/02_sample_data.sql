-- ===========================================
-- Multi-Tenant REST API Integration Service
-- Sample Data Script for Oracle
-- ===========================================

-- ===========================================
-- Sample Client Configurations (3 clients)
-- ===========================================

-- Client 1: CRM Integration
INSERT INTO CLIENT_CONFIGURATION (
    CLIENT_ID, CLIENT_NAME, API_ENDPOINT_URL, HTTP_METHOD,
    API_KEY, API_KEY_HEADER_NAME, TIMEOUT_SECONDS,
    RETRY_ENABLED, IS_ACTIVE, CONTENT_TYPE, CREATED_BY
) VALUES (
    'CRM_CLIENT_001',
    'CRM System Integration',
    'https://api.crm-system.com/v1/customers',
    'POST',
    'dGVzdC1hcGkta2V5LWNybS1lbmNyeXB0ZWQ=', -- Base64 encoded for demo
    'X-API-Key',
    300,
    1,
    1,
    'application/json',
    'SYSTEM'
);

-- Client 2: ERP Integration
INSERT INTO CLIENT_CONFIGURATION (
    CLIENT_ID, CLIENT_NAME, API_ENDPOINT_URL, HTTP_METHOD,
    API_KEY, API_KEY_HEADER_NAME, TIMEOUT_SECONDS,
    RETRY_ENABLED, IS_ACTIVE, CONTENT_TYPE, ADDITIONAL_HEADERS, CREATED_BY
) VALUES (
    'ERP_CLIENT_002',
    'ERP System Integration',
    'https://api.erp-system.com/api/orders',
    'POST',
    'dGVzdC1hcGkta2V5LWVycC1lbmNyeXB0ZWQ=',
    'Authorization',
    600,
    1,
    1,
    'application/json',
    '{"X-Custom-Header": "custom-value", "X-Request-Source": "integration-service"}',
    'SYSTEM'
);

-- Client 3: Notification Service
INSERT INTO CLIENT_CONFIGURATION (
    CLIENT_ID, CLIENT_NAME, API_ENDPOINT_URL, HTTP_METHOD,
    API_KEY, API_KEY_HEADER_NAME, TIMEOUT_SECONDS,
    RETRY_ENABLED, IS_ACTIVE, CONTENT_TYPE, CREATED_BY
) VALUES (
    'NOTIFY_CLIENT_003',
    'Notification Service',
    'https://api.notify-service.com/v2/send',
    'POST',
    'dGVzdC1hcGkta2V5LW5vdGlmeS1lbmNyeXB0ZWQ=',
    'X-API-Key',
    120,
    1,
    1,
    'application/json',
    'SYSTEM'
);

-- ===========================================
-- Email Recipients for each client
-- ===========================================

-- CRM Client recipients
INSERT INTO CLIENT_EMAIL_RECIPIENTS (CLIENT_ID, EMAIL_ADDRESS, RECIPIENT_NAME, RECIPIENT_TYPE, IS_ACTIVE, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'crm-team@company.com', 'CRM Team', 'TO', 1, 'SYSTEM');

INSERT INTO CLIENT_EMAIL_RECIPIENTS (CLIENT_ID, EMAIL_ADDRESS, RECIPIENT_NAME, RECIPIENT_TYPE, IS_ACTIVE, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'manager@company.com', 'Department Manager', 'CC', 1, 'SYSTEM');

-- ERP Client recipients
INSERT INTO CLIENT_EMAIL_RECIPIENTS (CLIENT_ID, EMAIL_ADDRESS, RECIPIENT_NAME, RECIPIENT_TYPE, IS_ACTIVE, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'erp-support@company.com', 'ERP Support', 'TO', 1, 'SYSTEM');

INSERT INTO CLIENT_EMAIL_RECIPIENTS (CLIENT_ID, EMAIL_ADDRESS, RECIPIENT_NAME, RECIPIENT_TYPE, IS_ACTIVE, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'finance@company.com', 'Finance Team', 'CC', 1, 'SYSTEM');

-- Notification Client recipients
INSERT INTO CLIENT_EMAIL_RECIPIENTS (CLIENT_ID, EMAIL_ADDRESS, RECIPIENT_NAME, RECIPIENT_TYPE, IS_ACTIVE, CREATED_BY)
VALUES ('NOTIFY_CLIENT_003', 'notifications@company.com', 'Notification Admin', 'TO', 1, 'SYSTEM');

-- ===========================================
-- Field Mappings for CRM Client
-- Demonstrates nested JSON structure
-- ===========================================

-- Basic customer fields
INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'ID', 'customer.id', 'STRING', 1, 1, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'FIRST_NAME', 'customer.name.firstName', 'STRING', 'TRIM||UPPERCASE', 1, 2, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'LAST_NAME', 'customer.name.lastName', 'STRING', 'TRIM||UPPERCASE', 1, 3, 'SYSTEM');

-- Concatenated full name
INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'FIRST_NAME', 'customer.name.fullName', 'STRING', 'CONCAT:FIRST_NAME|LAST_NAME| ', 0, 4, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'EMAIL', 'customer.contact.email', 'STRING', 1, 5, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'PHONE', 'customer.contact.phone', 'STRING', 'REPLACE:->', 0, 6, 'SYSTEM');

-- Date transformation
INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'DATE_OF_BIRTH', 'customer.dateOfBirth', 'STRING', 'DATE:yyyy-MM-dd', 0, 7, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, DEFAULT_VALUE, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER', 'CUSTOMER_TYPE', 'customer.type', 'STRING', 0, 'STANDARD', 8, 'SYSTEM');

-- Address fields (nested object)
INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER_ADDRESS', 'STREET_LINE_1', 'customer.address.street1', 'STRING', 0, 10, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER_ADDRESS', 'STREET_LINE_2', 'customer.address.street2', 'STRING', 0, 11, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER_ADDRESS', 'CITY', 'customer.address.city', 'STRING', 0, 12, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER_ADDRESS', 'STATE', 'customer.address.state', 'STRING', 0, 13, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER_ADDRESS', 'POSTAL_CODE', 'customer.address.postalCode', 'STRING', 0, 14, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, DEFAULT_VALUE, FIELD_ORDER, CREATED_BY)
VALUES ('CRM_CLIENT_001', 'CUSTOMER_ADDRESS', 'COUNTRY', 'customer.address.country', 'STRING', 0, 'USA', 15, 'SYSTEM');

-- ===========================================
-- Field Mappings for ERP Client
-- Demonstrates order data with numeric transformations
-- ===========================================

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'ORDER_HEADER', 'ID', 'order.orderId', 'STRING', 1, 1, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'ORDER_HEADER', 'CUSTOMER_ID', 'order.customerId', 'STRING', 1, 2, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'ORDER_HEADER', 'ORDER_DATE', 'order.orderDate', 'STRING', 'DATE:yyyy-MM-dd''T''HH:mm:ss.SSSZ', 1, 3, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'ORDER_HEADER', 'TOTAL_AMOUNT', 'order.total.amount', 'DECIMAL', 'ROUND:2', 1, 4, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, DEFAULT_VALUE, FIELD_ORDER, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'ORDER_HEADER', 'CURRENCY', 'order.total.currency', 'STRING', 0, 'USD', 5, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'ORDER_HEADER', 'STATUS', 'order.status', 'STRING', 1, 6, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('ERP_CLIENT_002', 'ORDER_HEADER', 'NOTES', 'order.notes', 'STRING', 0, 7, 'SYSTEM');

-- ===========================================
-- Field Mappings for Notification Client
-- Demonstrates simple flat structure
-- ===========================================

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('NOTIFY_CLIENT_003', 'CUSTOMER', 'ID', 'recipientId', 'STRING', 1, 1, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('NOTIFY_CLIENT_003', 'CUSTOMER', 'EMAIL', 'email', 'STRING', 1, 2, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, TRANSFORMATION_RULE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('NOTIFY_CLIENT_003', 'CUSTOMER', 'FIRST_NAME', 'recipientName', 'STRING', 'CONCAT:FIRST_NAME|LAST_NAME| ', 1, 3, 'SYSTEM');

INSERT INTO FIELD_MAPPING (CLIENT_ID, SOURCE_TABLE, SOURCE_COLUMN, TARGET_FIELD_PATH, DATA_TYPE, IS_MANDATORY, FIELD_ORDER, CREATED_BY)
VALUES ('NOTIFY_CLIENT_003', 'CUSTOMER', 'PHONE', 'phoneNumber', 'STRING', 0, 4, 'SYSTEM');

-- ===========================================
-- Sample Customer Data for Testing
-- ===========================================

INSERT INTO CUSTOMER (ID, FIRST_NAME, LAST_NAME, EMAIL, PHONE, DATE_OF_BIRTH, CUSTOMER_TYPE, STATUS)
VALUES ('CUST001', 'John', 'Smith', 'john.smith@email.com', '555-123-4567', TO_DATE('1985-06-15', 'YYYY-MM-DD'), 'PREMIUM', 'ACTIVE');

INSERT INTO CUSTOMER (ID, FIRST_NAME, LAST_NAME, EMAIL, PHONE, DATE_OF_BIRTH, CUSTOMER_TYPE, STATUS)
VALUES ('CUST002', 'Jane', 'Doe', 'jane.doe@email.com', '555-987-6543', TO_DATE('1990-03-22', 'YYYY-MM-DD'), 'STANDARD', 'ACTIVE');

INSERT INTO CUSTOMER (ID, FIRST_NAME, LAST_NAME, EMAIL, PHONE, DATE_OF_BIRTH, CUSTOMER_TYPE, STATUS)
VALUES ('CUST003', 'Robert', 'Johnson', 'r.johnson@email.com', '555-456-7890', TO_DATE('1978-11-08', 'YYYY-MM-DD'), 'ENTERPRISE', 'ACTIVE');

-- Customer Addresses
INSERT INTO CUSTOMER_ADDRESS (ID, CUSTOMER_ID, ADDRESS_TYPE, STREET_LINE_1, STREET_LINE_2, CITY, STATE, POSTAL_CODE, COUNTRY)
VALUES ('ADDR001', 'CUST001', 'HOME', '123 Main Street', 'Apt 4B', 'New York', 'NY', '10001', 'USA');

INSERT INTO CUSTOMER_ADDRESS (ID, CUSTOMER_ID, ADDRESS_TYPE, STREET_LINE_1, CITY, STATE, POSTAL_CODE, COUNTRY)
VALUES ('ADDR002', 'CUST002', 'HOME', '456 Oak Avenue', 'Los Angeles', 'CA', '90001', 'USA');

INSERT INTO CUSTOMER_ADDRESS (ID, CUSTOMER_ID, ADDRESS_TYPE, STREET_LINE_1, STREET_LINE_2, CITY, STATE, POSTAL_CODE, COUNTRY)
VALUES ('ADDR003', 'CUST003', 'BUSINESS', '789 Corporate Blvd', 'Suite 500', 'Chicago', 'IL', '60601', 'USA');

-- Sample Orders
INSERT INTO ORDER_HEADER (ID, CUSTOMER_ID, ORDER_DATE, TOTAL_AMOUNT, CURRENCY, STATUS, NOTES)
VALUES ('ORD001', 'CUST001', CURRENT_TIMESTAMP, 1250.75, 'USD', 'PENDING', 'Express shipping requested');

INSERT INTO ORDER_HEADER (ID, CUSTOMER_ID, ORDER_DATE, TOTAL_AMOUNT, CURRENCY, STATUS)
VALUES ('ORD002', 'CUST002', CURRENT_TIMESTAMP - INTERVAL '1' DAY, 89.99, 'USD', 'COMPLETED');

INSERT INTO ORDER_HEADER (ID, CUSTOMER_ID, ORDER_DATE, TOTAL_AMOUNT, CURRENCY, STATUS, NOTES)
VALUES ('ORD003', 'CUST003', CURRENT_TIMESTAMP - INTERVAL '2' DAY, 5499.00, 'USD', 'PROCESSING', 'Corporate order - Net 30 terms');

COMMIT;
